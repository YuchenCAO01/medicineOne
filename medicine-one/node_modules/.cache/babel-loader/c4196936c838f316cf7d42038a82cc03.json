{"ast":null,"code":"// @ is an alias to /src\nimport HeadBar from '../components/HeadBar.vue';\nimport SideBar from '../components/SideBar.vue';\nimport SearchBar from '../components/SearchBar.vue';\nimport api from '../api/index';\nimport MedicineList from '../components/MedicineList.vue';\nimport MedicineDetail from '../components/MedicineDetail.vue';\nimport MyLocation from '../components/MyLocation.vue';\nimport AddMedicine from '@/components/AddMedicine.vue';\nimport router from '@/router';\nexport default {\n  name: 'DashboardView',\n\n  data() {\n    return {\n      displayFlag: false,\n      isPhone: true,\n      displayMode: null,\n      dataReady: false,\n      mediInfoId: null,\n      blurResult: null,\n      user: {\n        userName: this.$route.params.username,\n        nickName: '',\n        userEmail: '',\n        numMedicine: null,\n        locations: null,\n        userMatadata: null\n      },\n      emptyDescription: \"No User Data\"\n    };\n  },\n\n  components: {\n    HeadBar,\n    SideBar,\n    SearchBar,\n    MedicineDetail,\n    MedicineList,\n    MyLocation,\n    MedicineDetail,\n    AddMedicine\n  },\n  methods: {\n    openSideBar() {\n      this.displayFlag = true;\n    },\n\n    closeSideBar() {\n      this.displayFlag = false;\n    },\n\n    // handleRefresh(){\n    //   console.log(\"Refresh Component\")\n    //   this.displayMode = 'refresh'\n    // },\n    handleSwitch(mode) {\n      console.log(\"switch to \" + mode.view);\n\n      if (mode.view == 'log_off') {\n        console.log(\"user log off\"); // ElMessage({\n        //               message: \"user log off\",\n        //               type: 'warning',\n        //           })\n\n        ElNotification.success({\n          title: 'Success',\n          message: 'User Log Off',\n          offset: 50\n        });\n        this.$router.push(\"/\");\n        this.$store.commit(\"userLogOff\");\n      } else {\n        if (mode.view == 'medi_info') {\n          console.log(\"Medicine info of : \" + this.mediInfoId);\n          this.mediInfoId = mode.mediId;\n          console.log(\"Medicine info of : \" + mode.mediId);\n          console.log(\"Medicine info of : \" + this.mediInfoId);\n        }\n\n        if (mode.view == 'search_result') {\n          this.blurResult = mode.results;\n        }\n\n        this.displayMode = mode.view;\n        console.log(\"switch to \" + this.displayMode);\n\n        if (this.isPhone) {\n          this.closeSideBar();\n        }\n      }\n    },\n\n    loadUserData(data) {\n      console.log(\"loading data ...\");\n      console.log(data);\n      this.user.nickName = data.nickname;\n      console.log(this.user.nickName);\n      this.user.userEmail = data.email;\n      console.log(this.user.userEmail);\n      this.user.locations = data.location;\n      console.log(this.user.locations);\n      this.user.userMatadata = data.simplemsg;\n      console.log(this.user.userMatadata);\n      this.user.numMedicine = data.simplemsg.length;\n      console.log(this.user.numMedicine);\n      this.$store.commit(\"updateUser\", data);\n      console.log(\"finished\");\n    },\n\n    getUserData() {\n      var that = this;\n      console.log(\"getting data ...\");\n      api.getUserData().then(res => {\n        console.log(\"returned user data ...\");\n        console.log(res.data);\n        that.loadUserData(res.data.data);\n        this.setDisplayMode();\n        that.dataReady = true;\n      });\n    },\n\n    updateUserData() {\n      console.log(\"updating user data\");\n      this.getUserData();\n    },\n\n    setDisplayMode() {\n      if (this.user.numMedicine === 0) {\n        this.displayMode = 'empty';\n      } else {\n        this.displayMode = 'default';\n      }\n    }\n\n  },\n\n  created() {\n    this.isPhone = !(window.innerWidth > 992);\n    this.displayFlag = window.innerWidth > 992;\n    var that = this;\n\n    if (!this.$store.getters.isAuthenticated) {\n      this.$router.push({\n        path: '/'\n      });\n    }\n\n    console.log(\"Load user data form backend\");\n    this.getUserData();\n    console.log(\"load finished\");\n    console.log(this.user.numMedicine);\n  },\n\n  mounted() {// this.display_flag = (window.innerWidth > 992);\n    // processAutoCompleteData();\n  }\n\n};","map":{"version":3,"mappings":"AAiGA;AACA,OAAOA,OAAP,MAAoB,2BAApB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,eAAe;EACbC,IAAI,EAAE,eADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,WAAU,EAAI,KADT;MAELC,OAAM,EAAI,IAFL;MAGLC,WAAU,EAAI,IAHT;MAILC,SAAQ,EAAI,KAJP;MAKLC,UAAS,EAAI,IALR;MAMLC,UAAS,EAAI,IANR;MASLC,IAAG,EAAI;QACLC,QAAO,EAAI,KAAKC,MAAL,CAAYC,MAAZ,CAAmBC,QADzB;QAELC,QAAO,EAAI,EAFN;QAGLC,SAAQ,EAAI,EAHP;QAILC,WAAU,EAAI,IAJT;QAKLC,SAAQ,EAAI,IALP;QAMLC,YAAW,EAAI;MANV,CATF;MAkBLC,gBAAe,EAAI;IAlBd,CAAP;EAoBD,CAvBY;;EAwBbC,UAAU,EAAE;IACV5B,OADU;IAEVC,OAFU;IAGVC,SAHU;IAIVG,cAJU;IAKVD,YALU;IAMVE,UANU;IAOVD,cAPU;IAQVE;EARU,CAxBC;EAkCbsB,OAAO,EAAE;IAGPC,WAAW,GAAE;MACX,KAAKnB,WAAL,GAAmB,IAAnB;IACD,CALM;;IAQPoB,YAAY,GAAE;MACZ,KAAKpB,WAAL,GAAmB,KAAnB;IACD,CAVM;;IAWP;IACA;IACA;IACA;IAEAqB,YAAY,CAACC,IAAD,EAAM;MAEhBC,OAAO,CAACC,GAAR,CAAY,eAAeF,IAAI,CAACG,IAAhC;;MACA,IAAIH,IAAI,CAACG,IAAL,IAAa,SAAjB,EAA2B;QACzBF,OAAO,CAACC,GAAR,CAAY,cAAZ,EADyB,CAEzB;QACA;QACA;QACA;;QACAE,cAAc,CAACC,OAAf,CAAuB;UACrBC,KAAK,EAAE,SADc;UAErBC,OAAO,EAAE,cAFY;UAGrBC,MAAM,EAAE;QAHa,CAAvB;QAKA,KAAKC,OAAL,CAAaC,IAAb,CAAkB,GAAlB;QACA,KAAKC,MAAL,CAAYC,MAAZ,CAAmB,YAAnB;MACF,CAbA,MAcK;QACH,IAAGZ,IAAI,CAACG,IAAL,IAAa,WAAhB,EAA4B;UAC1BF,OAAO,CAACC,GAAR,CAAY,wBAAwB,KAAKpB,UAAzC;UACA,KAAKA,UAAL,GAAkBkB,IAAI,CAACa,MAAvB;UACAZ,OAAO,CAACC,GAAR,CAAY,wBAAwBF,IAAI,CAACa,MAAzC;UACAZ,OAAO,CAACC,GAAR,CAAY,wBAAwB,KAAKpB,UAAzC;QACF;;QACA,IAAGkB,IAAI,CAACG,IAAL,IAAa,eAAhB,EAAgC;UAC9B,KAAKpB,UAAL,GAAkBiB,IAAI,CAACc,OAAvB;QACF;;QACA,KAAKlC,WAAL,GAAmBoB,IAAI,CAACG,IAAxB;QACAF,OAAO,CAACC,GAAR,CAAY,eAAe,KAAKtB,WAAhC;;QACA,IAAG,KAAKD,OAAR,EAAgB;UACd,KAAKmB,YAAL;QACF;MACF;IACD,CAjDM;;IAoDPiB,YAAY,CAACtC,IAAD,EAAM;MAChBwB,OAAO,CAACC,GAAR,CAAY,kBAAZ;MACAD,OAAO,CAACC,GAAR,CAAYzB,IAAZ;MACA,KAAKO,IAAL,CAAUK,QAAV,GAAqBZ,IAAI,CAACuC,QAA1B;MACAf,OAAO,CAACC,GAAR,CAAY,KAAKlB,IAAL,CAAUK,QAAtB;MACA,KAAKL,IAAL,CAAUM,SAAV,GAAsBb,IAAI,CAACwC,KAA3B;MACAhB,OAAO,CAACC,GAAR,CAAY,KAAKlB,IAAL,CAAUM,SAAtB;MACA,KAAKN,IAAL,CAAUQ,SAAV,GAAsBf,IAAI,CAACyC,QAA3B;MACAjB,OAAO,CAACC,GAAR,CAAY,KAAKlB,IAAL,CAAUQ,SAAtB;MACA,KAAKR,IAAL,CAAUS,YAAV,GAAyBhB,IAAI,CAAC0C,SAA9B;MACAlB,OAAO,CAACC,GAAR,CAAY,KAAKlB,IAAL,CAAUS,YAAtB;MACA,KAAKT,IAAL,CAAUO,WAAV,GAAwBd,IAAI,CAAC0C,SAAL,CAAeC,MAAvC;MACAnB,OAAO,CAACC,GAAR,CAAY,KAAKlB,IAAL,CAAUO,WAAtB;MACA,KAAKoB,MAAL,CAAYC,MAAZ,CAAmB,YAAnB,EAAiCnC,IAAjC;MACAwB,OAAO,CAACC,GAAR,CAAY,UAAZ;IACD,CAnEM;;IAqEPmB,WAAW,GAAE;MACX,IAAIC,IAAG,GAAI,IAAX;MACArB,OAAO,CAACC,GAAR,CAAY,kBAAZ;MACAhC,GAAG,CAACmD,WAAJ,GAAkBE,IAAlB,CAAuBC,GAAE,IAAI;QAC3BvB,OAAO,CAACC,GAAR,CAAY,wBAAZ;QACAD,OAAO,CAACC,GAAR,CAAYsB,GAAG,CAAC/C,IAAhB;QACA6C,IAAI,CAACP,YAAL,CAAkBS,GAAG,CAAC/C,IAAJ,CAASA,IAA3B;QACA,KAAKgD,cAAL;QACAH,IAAI,CAACzC,SAAL,GAAiB,IAAjB;MAED,CAPD;IAQD,CAhFM;;IAkFP6C,cAAc,GAAE;MACdzB,OAAO,CAACC,GAAR,CAAY,oBAAZ;MACA,KAAKmB,WAAL;IACD,CArFM;;IAuFPI,cAAc,GAAE;MACd,IAAG,KAAKzC,IAAL,CAAUO,WAAV,KAA0B,CAA7B,EAA+B;QAC7B,KAAKX,WAAL,GAAmB,OAAnB;MACD,CAFD,MAEK;QACH,KAAKA,WAAL,GAAmB,SAAnB;MACF;IACF;;EA7FO,CAlCI;;EAkIb+C,OAAO,GAAE;IACP,KAAKhD,OAAL,GAAe,EAAEiD,MAAM,CAACC,UAAP,GAAoB,GAAtB,CAAf;IACA,KAAKnD,WAAL,GAAoBkD,MAAM,CAACC,UAAP,GAAoB,GAAxC;IACA,IAAIP,IAAG,GAAI,IAAX;;IACA,IAAG,CAAC,KAAKX,MAAL,CAAYmB,OAAZ,CAAoBC,eAAxB,EAAwC;MACtC,KAAKtB,OAAL,CAAaC,IAAb,CAAkB;QAACsB,IAAG,EAAI;MAAR,CAAlB;IACF;;IACA/B,OAAO,CAACC,GAAR,CAAY,6BAAZ;IACA,KAAKmB,WAAL;IACApB,OAAO,CAACC,GAAR,CAAY,eAAZ;IACAD,OAAO,CAACC,GAAR,CAAY,KAAKlB,IAAL,CAAUO,WAAtB;EACD,CA7IY;;EA+Ib0C,OAAO,GAAG,CACR;IACA;EACD;;AAlJY,CAAf","names":["HeadBar","SideBar","SearchBar","api","MedicineList","MedicineDetail","MyLocation","AddMedicine","router","name","data","displayFlag","isPhone","displayMode","dataReady","mediInfoId","blurResult","user","userName","$route","params","username","nickName","userEmail","numMedicine","locations","userMatadata","emptyDescription","components","methods","openSideBar","closeSideBar","handleSwitch","mode","console","log","view","ElNotification","success","title","message","offset","$router","push","$store","commit","mediId","results","loadUserData","nickname","email","location","simplemsg","length","getUserData","that","then","res","setDisplayMode","updateUserData","created","window","innerWidth","getters","isAuthenticated","path","mounted"],"sourceRoot":"","sources":["/Users/yuchencao/C/CICD Learning/medicineOne/src/main/resources/medioneVUE/medicine-one/src/views/DashboardView.vue"],"sourcesContent":["/**\n/*\n* \n* @description: This view list all the medicine general information\n* @author: Yuchen Cao\n* @update: Yuchen Cao(2022-11-7 15:24)\n*\n*/\n<template>\n  <div class=\"common-layout\" style=\"height:100%\">\n    <el-container style=\"height:100%\">\n      <el-header height=\"5em\" v-if='isPhone'> \n        <HeadBar :header=\"this.user.nickName\" @open-side-bar-event=\"openSideBar\"></HeadBar>\n      </el-header>\n      <el-container>\n\n        <el-aside class=\"aisde\">\n          <SideBar \n            :displayVersion=\"'complex'\" \n            @close-side-bar-event=\"closeSideBar\" \n            v-show=\"displayFlag\" \n            ref=\"ChildSideBar\"\n            :user=\"{userName : this.user.userName, nickName : this.user.nickName}\"\n            @switch-event=\"handleSwitch\"\n          ></SideBar>\n        </el-aside>\n        \n        <el-main class=\"main\" :key=\"this.user\">\n          <div class=\"content_container\">\n\n            <div class=\"serach_bar_container\">\n              <SearchBar :key=\"this.user.numMedicine\" @switch-event=\"handleSwitch\"></SearchBar>\n            </div>\n\n            <div v-if=\"displayMode == 'empty'\" class=\"dynamic_content_container\">\n              <el-empty :description=emptyDescription />\n              <div>\n                <p class=\"empty_note\" v-if=\"isPhone\">Click ≡ on top left to open the side bar<br>Click Add Location on side bar<br>Then add locations where you may store drugs<br>Click Add Medicine on side bar<br>Then add medicine to your repository</p>\n                <p class=\"empty_note\" v-if=\"!isPhone\">Click Add Location on side bar<br>Then add locations where you may store drugs<br>Click Add Medicine on side bar<br>Then add medicine to your repository</p>            \n              </div>\n\n            </div>\n\n            <div v-if=\"displayMode == 'default'\" class=\"dynamic_content_container\">\n              <MedicineList :total=\"this.user.numMedicine\" @switch-event=\"handleSwitch\"></MedicineList>\n            </div>\n\n            <div v-if=\"displayMode == 'search_result'\" class=\"dynamic_content_container\">\n              <MedicineList \n                :total=\"this.blurResult.length\" \n                :isSearchResult=\"true\" \n                :searchResult=\"this.blurResult\"\n                :key=\"this.blurResult\"\n                @switch-event=\"handleSwitch\">\n              </MedicineList>\n            </div>\n\n            <div v-if=\"displayMode == 'medi_info'\" class=\"dynamic_content_container\">\n              <MedicineDetail \n                :mediId=\"this.mediInfoId\" \n                :key=\"this.mediInfoId\" \n                @switch-event=\"handleSwitch\"\n                @medicine-updated=\"updateUserData\"\n                ></MedicineDetail>\n              <!-- <h1> Medicine Information {{ this.mediInfoId }}</h1> -->\n            </div>\n\n\n            <div  v-if=\"displayMode == 'add_medi'\" class=\"dynamic_content_container\">\n              <!-- <h1> Add medicine component</h1> -->\n              <AddMedicine @medicine-updated=\"updateUserData\" @switch-event=\"handleSwitch\"></AddMedicine>\n            </div>\n\n\n            <div  v-if=\"displayMode == 'my_loca'\" class=\"dynamic_content_container\">\n              <!-- <h1> Add location component</h1> -->\n              <MyLocation @location-update=\"updateUserData\"></MyLocation>\n            </div>\n\n\n            <div v-if=\"displayMode == 'about'\" class=\"dynamic_content_container\">\n              <h1 style=\"font-size:2em\">About Medicine One</h1>\n              <AboutContent></AboutContent>\n            </div>\n\n            \n\n\n          </div></el-main>\n      </el-container>\n    </el-container>\n  </div>\n\n\n</template>\n\n<script>\n// @ is an alias to /src\nimport HeadBar from '../components/HeadBar.vue'\nimport SideBar from '../components/SideBar.vue'\nimport SearchBar from '../components/SearchBar.vue'\nimport api from '../api/index'\nimport MedicineList from '../components/MedicineList.vue'\nimport MedicineDetail from '../components/MedicineDetail.vue'\nimport MyLocation from '../components/MyLocation.vue'\nimport AddMedicine from '@/components/AddMedicine.vue'\nimport router from '@/router'\n\nexport default {\n  name: 'DashboardView',\n  data() {\n    return {\n      displayFlag : false,\n      isPhone : true,\n      displayMode : null,\n      dataReady : false,\n      mediInfoId : null,\n      blurResult : null,\n      \n      \n      user : {\n        userName : this.$route.params.username,\n        nickName : '',\n        userEmail : '',\n        numMedicine : null,\n        locations : null,\n        userMatadata : null,\n      },\n\n      emptyDescription : \"No User Data\"\n    }\n  },\n  components: {\n    HeadBar,\n    SideBar,\n    SearchBar,\n    MedicineDetail,\n    MedicineList,\n    MyLocation,\n    MedicineDetail,\n    AddMedicine\n},\n  methods: {\n\n\n    openSideBar(){\n      this.displayFlag = true;\n    },\n\n\n    closeSideBar(){\n      this.displayFlag = false;\n    },\n    // handleRefresh(){\n    //   console.log(\"Refresh Component\")\n    //   this.displayMode = 'refresh'\n    // },\n\n    handleSwitch(mode){\n\n      console.log(\"switch to \" + mode.view)\n      if (mode.view == 'log_off'){\n        console.log(\"user log off\");\n        // ElMessage({\n        //               message: \"user log off\",\n        //               type: 'warning',\n        //           })\n        ElNotification.success({\n          title: 'Success',\n          message: 'User Log Off',\n          offset: 50,\n        })\n        this.$router.push(\"/\")\n        this.$store.commit(\"userLogOff\")\n      }\n      else {\n        if(mode.view == 'medi_info'){\n          console.log(\"Medicine info of : \" + this.mediInfoId)\n          this.mediInfoId = mode.mediId\n          console.log(\"Medicine info of : \" + mode.mediId)\n          console.log(\"Medicine info of : \" + this.mediInfoId)\n        }\n        if(mode.view == 'search_result'){\n          this.blurResult = mode.results\n        }\n        this.displayMode = mode.view;\n        console.log(\"switch to \" + this.displayMode)\n        if(this.isPhone){\n          this.closeSideBar();\n        }\n      }\n    },\n\n\n    loadUserData(data){\n      console.log(\"loading data ...\")\n      console.log(data)\n      this.user.nickName = data.nickname;\n      console.log(this.user.nickName);\n      this.user.userEmail = data.email;\n      console.log(this.user.userEmail);\n      this.user.locations = data.location;\n      console.log(this.user.locations);\n      this.user.userMatadata = data.simplemsg;\n      console.log(this.user.userMatadata);\n      this.user.numMedicine = data.simplemsg.length\n      console.log(this.user.numMedicine);\n      this.$store.commit(\"updateUser\", data);\n      console.log(\"finished\")\n    },\n\n    getUserData(){\n      var that = this;\n      console.log(\"getting data ...\")\n      api.getUserData().then(res =>{\n        console.log(\"returned user data ...\")\n        console.log(res.data);\n        that.loadUserData(res.data.data);\n        this.setDisplayMode()\n        that.dataReady = true;\n        \n      })\n    },\n\n    updateUserData(){\n      console.log(\"updating user data\")\n      this.getUserData()\n    },\n\n    setDisplayMode(){\n      if(this.user.numMedicine === 0){\n        this.displayMode = 'empty'\n      }else{\n        this.displayMode = 'default'\n      }\n    }\n  },\n\n  created(){\n    this.isPhone = !(window.innerWidth > 992);\n    this.displayFlag = (window.innerWidth > 992);\n    var that = this;\n    if(!this.$store.getters.isAuthenticated){\n      this.$router.push({path : '/'})\n    }\n    console.log(\"Load user data form backend\")\n    this.getUserData()\n    console.log(\"load finished\")\n    console.log(this.user.numMedicine)\n  },\n\n  mounted() {\n    // this.display_flag = (window.innerWidth > 992);\n    // processAutoCompleteData();\n  },\n}\n</script>\n\n<style scoped>\n  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');\n\n  * {\n    font-family: \"Poppins\", sans-serif;\n  }\n  \n  a {\n    text-decoration: none;\n  }\n  .common-layout{\n    margin: 0;\n    border: 0;\n    padding: 0;\n  }\n  header.el-header {\n    padding: 0;\n    margin: 0;\n    border: 0;\n  }\n\n  .dynamic_content_container{\n    width: 100%;\n    margin-top:1em\n  }\n  \n  .main {\n    padding-top: 0px;\n    margin-top: 0px;\n    border-top: 0px;\n  }\n\n  .empty_note {\n    color: #6E78F7;\n    border-radius: 2em;\n    box-shadow: 6px 6px 6px #b8cbdd;\n    border: 1px solid #babbbd;\n    padding : 1em;\n  }\n\n  \n  /* phone version */\n  @media screen and (max-width: 992px) {\n    .about_content > * {\n      font-size: medium;\n      margin-top: 10px;\n    }\n    aside.el-aside.aisde {\n      width: 0;\n    }\n\n    .serach_bar_container {\n      width: 100%;\n      height: 3em;\n      margin-top: 1em;\n    }\n\n  }\n\n\n\n\n\n\n\n\n  /* desktop style */\n  @media screen and (min-width: 992px) {\n    /* website content */\n    .content_container {\n      width: 100%;\n      margin-left: 0;\n      margin-top: 2em;\n    }\n  \n    .open_button {\n      display: none;\n    }\n  \n    aside.el-aside.aisde {\n      width: 20em;\n    }\n  \n    .main {\n      height: 100%;\n    }\n    .about_content{\n      font-size: larger;\n      margin-top: 60px;\n    }\n\n\n\n\n    .serach_bar_container {\n      width: 100%;\n      height: 4em;\n      margin-top: 2em;\n    }\n  }\n\n</style>\n"]},"metadata":{},"sourceType":"module"}