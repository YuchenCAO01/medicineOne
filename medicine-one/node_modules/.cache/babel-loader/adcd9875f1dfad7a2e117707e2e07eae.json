{"ast":null,"code":"import MedicineListPagination from './MedicineListPagination.vue';\nimport api from '../api/index';\nexport default {\n  name: \"MedicineList\",\n\n  data() {\n    return {\n      //display_flag : true,\n      isPhone: null,\n      pagesize: 5,\n      page: 1,\n      totalPages: Math.ceil(this.total / this.pagesize),\n      title: \"My Medicines\",\n      imageBasePath: \"https://medione.herokuapp.com/\",\n      listData: [] // [\n      //   {\n      //     id: 1,\n      //     brandname: \"Norvasc\" + 1,\n      //     image: require(\"../assets/logo.png\"),\n      //     quantity: 2,\n      //     validity: \"03/08/2022\",\n      //     dosage: 3,\n      //     dosagetype: \"pills\",\n      //     quantitytype: \"bottles\",\n      //   },\n      //   {\n      //     id: 2,\n      //     brandname: \"Norvasc\" + 2,\n      //     image: require(\"../assets/logo.png\"),\n      //     quantity: 3,\n      //     validity: \"03/08/2022\",\n      //     dosage: 4,\n      //     dosagetype: \"pills\",\n      //     quantitytype: \"bottles\",\n      //   },\n      //   {\n      //     id: 3,\n      //     brandname: \"Norvasc\" + 3,\n      //     image: require(\"../assets/logo.png\"),\n      //     quantity: 3,\n      //     validity: \"03/08/2022\",\n      //     dosage: 4,\n      //     dosagetype: \"drops\",\n      //     quantitytype: \"boxes\",\n      //   },\n      //   {\n      //     id: 4,\n      //     brandname: \"Norvasc\" + 4,\n      //     image: require(\"../assets/logo.png\"),\n      //     quantity: 3,\n      //     validity: \"03/08/2022\",\n      //     dosage: 4,\n      //     dosagetype: \"capsules\",\n      //     quantitytype: \"packs\",\n      //   },\n      //   {\n      //     id: 5,\n      //     brandname: \"Norvasc\" + 5,\n      //     image: require(\"../assets/logo.png\"),\n      //     quantity: 3,\n      //     validity: \"03/08/2022\",\n      //     dosage: 4,\n      //     dosagetype: \"capsules\",\n      //     quantitytype: \"packs\",\n      //   }\n      // ]\n\n    };\n  },\n\n  props: {\n    total: {\n      type: Number,\n      default: 0\n    },\n    isSearchResult: {\n      type: Boolean,\n      default: false\n    },\n    searchResult: {\n      type: Object,\n      default: null\n    }\n  },\n  components: {\n    MedicineListPagination\n  },\n\n  created() {\n    if (this.isSearchResult) {\n      console.log(\"Display Search Result\");\n      this.title = \"Search Result\";\n      this.listData = this.searchResult;\n    } else {\n      console.log(\"Getting pagination data\");\n      this.getPageData(1, this.pagesize);\n    }\n\n    this.isPhone = !(window.innerWidth > 992);\n  },\n\n  // beforeMount(){\n  //   this.isPhone = !(window.innerWidth > 992);\n  // },\n  methods: {\n    changePage(page, pagesize) {\n      var _page = this.page,\n          _pagesize = this.pagesize;\n      this.page = page;\n      this.pagesize = pagesize;\n\n      if (page !== _page && pagesize || _pagesize !== pagesize) {\n        console.log(\"get list data\");\n        this.getPageData(page, pagesize);\n      }\n    },\n\n    getPageData(curPage, pageSize) {\n      const loading = this.openFullScreen2();\n      console.log(\"Getting page \" + curPage + \" data\");\n      var that = this;\n      api.getPageData(curPage, pageSize).then(res => {\n        loading.close();\n        console.log(\"Pagination data received\");\n        console.log(res.data);\n        that.listData = res.data.data.records;\n      });\n    },\n\n    goToMediDetail(id) {\n      var mode = {\n        view: 'medi_info',\n        mediId: id\n      };\n      this.$emit(\"switch-event\", mode);\n    },\n\n    convertDate(date) {\n      var dateList = date.split('/');\n      var day = dateList[0];\n      var month = dateList[1];\n      var year = dateList[2];\n      return year + \"-\" + month + \"-\" + day;\n    },\n\n    isValid(date) {\n      var sDate1 = this.convertDate(date);\n      let dateSpan, iDays;\n      sDate1 = Date.parse(sDate1);\n      var sDate2 = new Date();\n      dateSpan = sDate1 - sDate2; //dateSpan = Math.abs(dateSpan)\n\n      iDays = Math.floor(dateSpan / (24 * 3600 * 1000));\n      return iDays >= 15;\n    },\n\n    openFullScreen2() {\n      const loading = ElLoading.service({\n        lock: true,\n        text: 'Loading',\n        background: 'rgba(0, 0, 0, 0.7)'\n      }); // setTimeout(() => {\n      //   loading.close()\n      // }, 10000)\n\n      return loading;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["MedicineListPagination","api","name","data","isPhone","pagesize","page","totalPages","Math","ceil","total","title","imageBasePath","listData","props","type","Number","default","isSearchResult","Boolean","searchResult","Object","components","created","console","log","getPageData","window","innerWidth","methods","changePage","_page","_pagesize","curPage","pageSize","loading","openFullScreen2","that","then","res","close","records","goToMediDetail","id","mode","view","mediId","$emit","convertDate","date","dateList","split","day","month","year","isValid","sDate1","dateSpan","iDays","Date","parse","sDate2","floor","ElLoading","service","lock","text","background"],"sourceRoot":"","sources":["/Users/yuchencao/C/CICD Learning/medicineOne/src/main/resources/medioneVUE/medicine-one/src/components/MedicineList.vue"],"sourcesContent":["/**\n/*\n* \n* @description: This component contains medicine list in the dashboard view\n* @author: Yuchen Cao\n* @update: Yuchen Cao (2022-11-3 11:16)\n*\n*/\n\n<template>\n  <div class=\"list_containder\">\n    <!-- <h1> {{ this.title }}</h1> -->\n    <div class=\"list_item_container\">\n    <!-- <img src=\"../assets/logo.png\" alt=\"\"> -->\n      <div class=\"list_header_line\" v-if=\"!isPhone\">\n        <div class=\"list_header\">Medicine Name</div>\n        <div class=\"list_header\">Photo</div>\n        <div class=\"list_header\">quantity</div>\n        <div class=\"list_header\">Validity &nbsp; DD/MM/YYYY</div>\n        <div class=\"list_header\">Dosage</div>\n      </div>\n      <div class=\"desktop_list_warpper\" v-if=\"!isPhone\">\n        <div class=\"medi_row\" \n          v-for=\"medi_data in this.listData\" \n          :key='medi_data.id'\n          @click=\"goToMediDetail(medi_data.id)\"  \n        >\n          <div class=\"medi_info\">\n            {{medi_data.brandname}}\n          </div>\n          <div class=\"medi_info\">\n            <div>\n              <img class=\"medi_photo\" :src=\"medi_data.image\">\n            </div>\n          </div>\n          <div class=\"medi_info\">\n            {{medi_data.quantity}} {{medi_data.quantitytype}}\n          </div>\n          <div class=\"medi_info valid\" v-if=\"this.isValid(medi_data.validity)\">\n            {{medi_data.validity}}\n          </div>\n          <div class=\"medi_info invalid_medicine\" v-if=\"!this.isValid(medi_data.validity)\">\n            {{medi_data.validity}}\n          </div>\n          <div class=\"medi_info\">\n            {{medi_data.dosage}} {{medi_data.dosagetype}}\n          </div>\n        </div>\n      </div>\n\n      <div class=\"phone_list_warpper\" v-if=\"isPhone\">\n        <div \n          class=\"medi_row\" \n          v-for=\"medi_data in this.listData\" \n          :key='medi_data.id' \n          @click=\"goToMediDetail(medi_data.id)\"\n        >\n          <div class=\"medi_info_left\">\n            {{medi_data.brandname}}\n            <div>\n              <img class=\"medi_photo\" :src=\"medi_data.image\">\n            </div>\n          </div>\n\n          <div class=\"medi_info_right\">\n            <table>\n              <tr>\n                <td style=\"text-align=left\">\n                  Quantity: \n                </td>\n                <td style=\"text-align=right\">\n                  {{medi_data.quantity}} {{medi_data.quantitytype}}\n                </td>\n              </tr>\n              <tr>\n                <td style=\"text-align=left\">\n                  Validity: \n                </td>\n                <td style=\"text-align=right\" v-if=\"this.isValid(medi_data.validity)\">\n                  {{medi_data.validity}}\n                </td>\n                <td style=\"text-align=right\" class=\"invalid_medicine\" v-if=\"!this.isValid(medi_data.validity)\">\n                  {{medi_data.validity}}\n                </td>\n              </tr>\n              <tr>\n                <td style=\"text-align=left\">\n                  Dosage: \n                </td>\n                <td style=\"text-align=right\">\n                  {{medi_data.dosage}} {{medi_data.dosagetype}}\n                </td>\n              \n              </tr>\n            </table>\n\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n\n\n    <div class=\"page_select_bar\" v-if=\"!isSearchResult\">\n      <MedicineListPagination :total = \"this.total\" :pagesize = \"pagesize\" :page=\"this.page\" :totalPages = \"this.totalPages\" @change = \"changePage\" />\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport MedicineListPagination from './MedicineListPagination.vue';\nimport api from '../api/index'\n\n\n\n\n\nexport default {\n    name: \"MedicineList\",\n    data() {\n        return {\n        //display_flag : true,\n        isPhone : null,\n        pagesize : 5,\n        page : 1,\n        totalPages : Math.ceil(this.total/this.pagesize),\n        title : \"My Medicines\",\n        imageBasePath : \"https://medione.herokuapp.com/\",\n        listData : [],\n        // [\n        //   {\n        //     id: 1,\n        //     brandname: \"Norvasc\" + 1,\n        //     image: require(\"../assets/logo.png\"),\n        //     quantity: 2,\n        //     validity: \"03/08/2022\",\n        //     dosage: 3,\n        //     dosagetype: \"pills\",\n        //     quantitytype: \"bottles\",\n        //   },\n        //   {\n        //     id: 2,\n        //     brandname: \"Norvasc\" + 2,\n        //     image: require(\"../assets/logo.png\"),\n        //     quantity: 3,\n        //     validity: \"03/08/2022\",\n        //     dosage: 4,\n        //     dosagetype: \"pills\",\n        //     quantitytype: \"bottles\",\n        //   },\n        //   {\n        //     id: 3,\n        //     brandname: \"Norvasc\" + 3,\n        //     image: require(\"../assets/logo.png\"),\n        //     quantity: 3,\n        //     validity: \"03/08/2022\",\n        //     dosage: 4,\n        //     dosagetype: \"drops\",\n        //     quantitytype: \"boxes\",\n        //   },\n        //   {\n        //     id: 4,\n        //     brandname: \"Norvasc\" + 4,\n        //     image: require(\"../assets/logo.png\"),\n        //     quantity: 3,\n        //     validity: \"03/08/2022\",\n        //     dosage: 4,\n        //     dosagetype: \"capsules\",\n        //     quantitytype: \"packs\",\n        //   },\n        //   {\n        //     id: 5,\n        //     brandname: \"Norvasc\" + 5,\n        //     image: require(\"../assets/logo.png\"),\n        //     quantity: 3,\n        //     validity: \"03/08/2022\",\n        //     dosage: 4,\n        //     dosagetype: \"capsules\",\n        //     quantitytype: \"packs\",\n        //   }\n        // ]\n        }\n    },\n    props:{\n      total: {\n        type: Number,\n        default: 0,\n      },\n      isSearchResult:{\n        type: Boolean,\n        default : false,\n      },\n      searchResult : {\n        type : Object,\n        default : null,\n      }\n    },\n    \n    components: { \n      MedicineListPagination \n    },\n    created(){\n      if(this.isSearchResult){\n        console.log(\"Display Search Result\")\n        this.title = \"Search Result\"\n        this.listData = this.searchResult\n      }\n      else{\n        console.log(\"Getting pagination data\")\n        this.getPageData(1, this.pagesize)\n      }\n      this.isPhone = !(window.innerWidth > 992);\n\n    },\n    // beforeMount(){\n    //   this.isPhone = !(window.innerWidth > 992);\n    // },\n    methods: {\n      changePage(page, pagesize) {\n         var _page = this.page,\n             _pagesize = this.pagesize;\n        this.page = page;\n        this.pagesize = pagesize;\n        if (page !== _page && pagesize || _pagesize !== pagesize){\n          console.log(\"get list data\")\n          this.getPageData(page, pagesize)\n        } \n      },\n\n      getPageData(curPage, pageSize){\n        const loading = this.openFullScreen2()\n        console.log(\"Getting page \" + curPage + \" data\")\n        var that = this\n        api.getPageData(curPage, pageSize).then(res => {\n          loading.close()\n          console.log(\"Pagination data received\")\n          console.log(res.data)\n          that.listData = res.data.data.records\n        })\n      },\n\n\n      goToMediDetail(id){\n        var mode = {\n          view : 'medi_info',\n          mediId : id\n        }\n        this.$emit(\"switch-event\", mode)\n      },\n      convertDate(date){\n        var dateList = date.split('/')\n        var day = dateList[0]\n        var month = dateList[1]\n        var year = dateList[2]\n        return year + \"-\" + month + \"-\" + day\n      },\n      \n      isValid(date) {\n        var sDate1 = this.convertDate(date)\n        let dateSpan,iDays\n        sDate1 = Date.parse(sDate1)\n        var sDate2 = new Date()\n        dateSpan = sDate1 - sDate2\n        //dateSpan = Math.abs(dateSpan)\n        iDays = Math.floor(dateSpan / (24 * 3600 * 1000))\n        return iDays >= 15\n      },\n\n      openFullScreen2(){\n        const loading = ElLoading.service({\n          lock: true,\n          text: 'Loading',\n          background: 'rgba(0, 0, 0, 0.7)',\n        })\n        // setTimeout(() => {\n        //   loading.close()\n        // }, 10000)\n        return loading\n      }\n\n  }\n}\n</script>\n\n<style scoped>\n\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');\n\n* {\n  font-family: \"Poppins\", sans-serif;\n}\n\n@media screen and (max-width: 992px){   \n  list_item_container{\n    width: 100%;\n    padding: 2em;\n  }\n\n  .medi_photo{\n    width: 5em;\n    height: 5em;\n  }\n  \n\n  .medi_row{\n    width: 100%;\n    display: flex;\n    align-items: center;\n    margin-top: 1em;\n    margin-bottom: 1em;\n    border: 1px solid #dadcf4;\n    border-radius: 1.5em;\n    background-color: #f2f6ff;\n    box-shadow: 2px 2px 2px #b8cbdd;\n    font-size: 1em;\n    transition-duration: 0.3s;\n  }\n\n  .medi_row:hover{\n    background-color: #dfe8fc;\n    box-shadow: 12px 12px 12px #a9bfd3\n  }\n  \n  .medi_info_left{\n    width: 35%;\n    height: 100%;\n    text-align: left;\n    font-size: 1em;\n    color: #3082CC;\n    padding-left: 1em;\n    font-weight: 600;\n  }\n  .medi_info_right{\n    width: 65%;\n    height: 100%;\n    text-align: center;\n    font-size: 0.8em;\n    color : #3082CC;\n  }\n\n  .desktop_list_warpper{\n    margin: 0;\n    padding: 0;\n    border: 0;\n    width: 100%;\n  }\n  \n  .invalid_medicine{\n    color: #000000;\n    background-color: #FF4D4D;\n    border-radius: 2em;\n\n  }\n}\n\n\n\n\n\n\n@media screen and (min-width: 992px){   \n  list_item_container{\n    width: 100%;\n    padding: 2em;\n  }\n\n  .medi_photo{\n    width: 6em;\n    height: 100%;\n  }\n  \n  .list_header_line{\n    width: 100%;\n    display: flex;\n    text-align: center;\n  }\n\n  .list_header{\n    width : 20%;\n    font-size: 1.3em;\n    color: #6E78F7;\n    font-weight: 600;\n  }\n\n  .medi_row{\n    width: 100%;\n    height: 8em;\n    display: flex;\n    align-items: center;\n    margin-top: 1em;\n    margin-bottom: 1em;\n    border: 1px solid #dadcf4;\n    border-radius: 1.5em;\n    background-color: #f2f6ff;\n    box-shadow: 2px 2px 2px #b8cbdd;\n    transition-duration: 0.3s;\n  }\n\n  .medi_row:hover{\n    background-color: #dfe8fc;\n    box-shadow: 12px 12px 12px #a9bfd3\n  }\n  \n  .medi_info{\n    width: 20%;\n    /*height: 100%;*/\n    text-align: center;\n  }\n\n  .invalid_medicine{\n    color: #ffffff;\n    background-color: #FF4D4D;\n    border-radius: 2em;\n    padding: 1em;\n  }\n  .valid{\n    padding: 1em\n  }\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}