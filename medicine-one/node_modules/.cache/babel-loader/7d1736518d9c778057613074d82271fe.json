{"ast":null,"code":"import store from '../store/index';\nimport api from '../api/index';\nimport DetailDescription from './DetailDescription.vue';\nimport { ref } from 'vue';\nimport UploadImage from './UploadImage.vue';\nexport default {\n  name: \"AddMedicine\",\n\n  data() {\n    return {\n      isPhone: false,\n      formWidth: \"13%\",\n      locations: [],\n      form: {\n        id: -1,\n        brandname: \"\",\n        image: \"\",\n        quantity: \"\",\n        validity: \"\",\n        dosage: \"\",\n        dosagetype: \"\",\n        quantitytype: \"\",\n        manufacturername: \"\",\n        genericname: \"\",\n        producttype: \"\",\n        route: \"\",\n        description: \"\",\n        usage: \"\",\n        warnings: \"\",\n        contraindications: \"\",\n        adversereaction: \"\",\n        overdosage: \"\",\n        username: \"\",\n        locationid: \"\"\n      },\n      mediNote: \"\",\n      FDAResult: null,\n      dosageFreq: \"\"\n    };\n  },\n\n  props: {},\n  methods: {\n    onSubmit() {\n      var validFlag = this.isFormValid(this.form);\n\n      if (validFlag.type === \"error\") {\n        ElNotification.error(validFlag.msg);\n        return null;\n      } else if (validFlag.type === \"warning\") {\n        ElNotification({\n          message: validFlag.msg,\n          type: 'warning'\n        });\n      }\n\n      this.form.dosagetype = this.form.dosagetype + this.dosageFreq;\n      this.form.validity = this.form.validity.toLocaleDateString('en-GB');\n      console.log(\"Medicine Information\");\n      console.log(this.form);\n      var that = this;\n      api.addMedicine(this.form).then(res => {\n        console.log(res);\n\n        if (res.data.status === 200) {\n          if (that.mediNote !== \"\") {\n            that.addNote(res.data.data);\n          }\n\n          ElNotification({\n            message: 'SUCCESS',\n            type: 'success'\n          });\n          that.triggerUpdate();\n        }\n      });\n    },\n\n    addNote(id) {\n      console.log(\"id : \" + id);\n      console.log(this.mediNote);\n      api.addMediNote(id, this.mediNote);\n    },\n\n    triggerUpdate() {\n      this.$emit(\"medicine-updated\");\n      this.backtoDashboard();\n    },\n\n    backtoDashboard() {\n      console.log(\"back to dashboard triggered\");\n      var mode = {\n        view: 'default'\n      };\n      this.$emit(\"switch-event\", mode);\n    },\n\n    isFormValid(form) {\n      var results = {\n        state: true,\n        msg: \"Valid form\",\n        type: \"success\"\n      };\n\n      if (form.brandname.length <= 0) {\n        results.state = false, results.msg = \"Brand name missing\";\n        results.type = \"error\";\n        return results;\n      }\n\n      if (form.validity === \"\") {\n        results.state = false, results.msg = \"Expiration date missing\";\n        results.type = \"error\";\n        return results;\n      }\n\n      if (form.quantity === \"\") {\n        results.state = false, results.msg = \"Quantity missing\";\n        results.type = \"error\";\n        return results;\n      }\n\n      if (form.quantitytype === \"\") {\n        results.state = false, results.msg = \"Quantity Unit missing\";\n        results.type = \"error\";\n        return results;\n      }\n\n      if (form.dosage === \"\") {\n        results.state = false, results.msg = \"Dosage missing\";\n        results.type = \"error\";\n        return results;\n      }\n\n      if (form.dosagetype === \"\") {\n        results.state = false, results.msg = \"Dosage Unit missing\";\n        results.type = \"error\";\n        return results;\n      }\n\n      if (this.dosageFreq === \"\") {\n        results.state = false, results.msg = \"Dosage frequency missing\";\n        results.type = \"error\";\n        return results;\n      }\n\n      if (form.locations === \"\") {\n        results.state = false, results.msg = \"Location missing\";\n        results.type = \"warning\";\n        return results;\n      }\n\n      if (form.image === \"\") {\n        results.state = false, results.msg = \"Image missing\";\n        results.type = \"warning\";\n        return results;\n      }\n\n      return results;\n    },\n\n    getFDAInfo(brandname) {\n      console.log(\"User entered \" + brandname);\n      var name = brandname.toUpperCase();\n      var that = this;\n\n      if (name !== \"\") {\n        api.getFDAData(name).then(res => {\n          console.log(res.data);\n\n          try {\n            that.FDAResult = res.data.results[0];\n          } catch (e) {\n            console.error(e);\n          } // that.FDAResult = res.data.results[0]\n\n\n          try {\n            that.form.manufacturername = that.FDAResult.openfda.manufacturer_name[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.manufacturername = that.FDAResult.openfda.manufacturer_name[0]\n\n\n          try {\n            that.form.genericname = that.FDAResult.openfda.generic_name[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.genericname = that.FDAResult.openfda.generic_name[0]\n\n\n          try {\n            that.form.producttype = that.FDAResult.openfda.product_type[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.producttype = that.FDAResult.openfda.product_type[0]\n\n\n          try {\n            that.form.route = that.FDAResult.openfda.route[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.route = that.FDAResult.openfda.route[0]\n\n\n          try {\n            that.form.description = that.FDAResult.description[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.description = that.FDAResult.description[0]\n\n\n          try {\n            that.form.usage = that.FDAResult.indications_and_usage[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.usage = that.FDAResult.indications_and_usage[0]\n\n\n          try {\n            that.form.warnings = that.FDAResult.warnings_and_cautions[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.warnings = that.FDAResult.warnings_and_cautions[0]\n\n\n          try {\n            that.form.contraindications = that.FDAResult.contraindications[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.contraindications = that.FDAResult.contraindications[0]\n\n\n          try {\n            that.form.adversereaction = that.FDAResult.adverse_reactions[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.adversereaction = that.FDAResult.adverse_reactions[0]\n\n\n          try {\n            that.form.overdosage = that.FDAResult.overdosage[0];\n          } catch (e) {\n            console.error(e);\n          } //that.form.overdosage = that.FDAResult.overdosage[0]\n\n\n          ElNotification({\n            message: \"Extra information is ready\",\n            type: 'success'\n          });\n        }, () => {\n          console.log(\"Medicine Name Not Found\");\n          ElNotification({\n            message: \"No extra information found\",\n            type: 'warning'\n          });\n        });\n      } else {\n        console.log(\"No input\");\n      }\n    },\n\n    handleImageUpload(url) {\n      console.log(\"Image URL is \" + url);\n      this.form.image = url;\n    },\n\n    handleImageRemoved(file) {\n      console.log(\"Image deleted\");\n      this.form.image = \"\";\n    }\n\n  },\n\n  created() {\n    this.isPhone = !(window.innerWidth > 992);\n    this.locations = store.getters.getLocations;\n\n    if (this.isPhone) {\n      this.formWidth = \"22%\";\n    }\n\n    this.form.username = store.getters.getUserName;\n  },\n\n  components: {\n    DetailDescription,\n    UploadImage\n  }\n};","map":{"version":3,"mappings":"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","names":["store","api","DetailDescription","ref","UploadImage","name","data","isPhone","formWidth","locations","form","id","brandname","image","quantity","validity","dosage","dosagetype","quantitytype","manufacturername","genericname","producttype","route","description","usage","warnings","contraindications","adversereaction","overdosage","username","locationid","mediNote","FDAResult","dosageFreq","props","methods","onSubmit","validFlag","isFormValid","type","ElNotification","error","msg","message","toLocaleDateString","console","log","that","addMedicine","then","res","status","addNote","triggerUpdate","addMediNote","$emit","backtoDashboard","mode","view","results","state","length","getFDAInfo","toUpperCase","getFDAData","e","openfda","manufacturer_name","generic_name","product_type","indications_and_usage","warnings_and_cautions","adverse_reactions","handleImageUpload","url","handleImageRemoved","file","created","window","innerWidth","getters","getLocations","getUserName","components"],"sourceRoot":"","sources":["/Users/yuchencao/C/CICD Learning/medicineOne/src/main/resources/medioneVUE/medicine-one/src/components/AddMedicine.vue"],"sourcesContent":["/**\n/*\n* \n* @description: This component contains add medicine page function,\n*               function include add medicine, upload image, show medicine details\n* @author: Yuchen Cao\n* @update: Yuchen Cao (2022-11-3 10:14)\n*\n*/\n\n<template>\n  <div class=\"add_medi\">\n    <el-form :model=\"form\" :label-width=\"this.formWidth\" class=\"add_medi_form\">\n      <el-form-item label=\"Name\">\n        <el-input v-model=\"form.brandname\" @blur=\"getFDAInfo(form.brandname)\"/>\n      </el-form-item>\n      <el-popover\n        placement=\"top-start\"\n        title=\"Location not on the list?\"\n        :width=\"280\"\n        trigger=\"hover\"\n        content=\"Adding a location in My Location.\"\n      >\n        <template #reference>\n          <el-form-item label=\"Location\">\n            <el-select v-model=\"form.locationid\" placeholder=\"select storage locations\">\n              <el-option v-for=\"loc in this.locations\" :key=\"loc\" :label=loc.address :value=loc.locationid />\n            </el-select>\n          </el-form-item>\n        </template>\n      </el-popover>\n      <el-form-item label=\"Used by\">\n          <el-date-picker\n            v-model=\"form.validity\"\n            type=\"date\"\n            placeholder=\"DD/MM/YYYY\"\n            format=\"DD/MM/YYYY\"\n            :style=\"this.isPhone ? 'width : 70%' : 'width : 60%'\"\n          />\n      </el-form-item>\n      <el-form-item label=\"Quantitiy\">\n        <el-input v-model=\"form.quantity\" class=\"quant_dosage_item\" />\n        <el-select v-model=\"form.quantitytype\" placeholder=\"select unit\">\n          <el-option label=\"Unit\" value=\"Unit \" />\n          <el-option label=\"Boxes\" value=\"Boxes \" />\n          <el-option label=\"Bags\" value=\"Bags \" />\n          <el-option label=\"Bottles\" value=\"Bottles \" />\n          <el-option label=\"Tubes\" value=\"Tubes \" />\n          <el-option label=\"Packages\" value=\"Packages \" />\n\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"Dosage\" class=\"doage_item\">\n        <el-input v-model=\"form.dosage\" class=\"quant_dosage_item\" />\n        <el-select v-model=\"form.dosagetype\" placeholder=\"select unit\">\n          <el-option label=\"Pills\" value=\"Pills \" />\n          <el-option label=\"Capsules\" value=\"Capsules \" />\n          <el-option label=\"Drops\" value=\"Drops \" />\n          <el-option label=\"Patches\" value=\"Patches \" />\n          <el-option label=\"Bags\" value=\"Bags \" />\n          <el-option label=\"Bottles\" value=\"Bottles \" />\n          <el-option label=\"Tubes\" value=\"Tubes \" />\n          <el-option label=\"g\" value=\"g \" />\n          <el-option label=\"ml\" value=\"ml \" />\n        </el-select>\n        <el-select v-model=\"dosageFreq\" placeholder=\"select frequency\">\n          <el-option label=\"1 times per day\" value=\"1 times per day\" />\n          <el-option label=\"2 times per day\" value=\"2 times per day\" />\n          <el-option label=\"3 times per day\" value=\"3 times per day\" />\n          <el-option label=\"4 times per day\" value=\"4 times per day\" />\n          <el-option label=\"When needed\" value=\"When needed\" />\n          <el-option label=\"Emergency\" value=\"Emergency\" />\n          <el-option label=\"Every 12 hour\" value=\"Every 12 hour\" />\n          <el-option label=\"Every 2 hour\" value=\"Every 2 hour\" />\n          <el-option label=\"Every 4 hour\" value=\"Every 4 hour\" />\n          <el-option label=\"Every 6 hour\" value=\"Every 6 hour\" />\n          <el-option label=\"Every 8 hour\" value=\"Every 8 hour\" />\n          <el-option label=\"Every 10 hour\" value=\"Every 10 hour\" />\n          <el-option label=\"Every 12 hour\" value=\"Every 12 hour\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"Note\">\n        <el-input v-model=\"mediNote\" type=\"textarea\" class=\"note_text_area\"/>\n      </el-form-item>\n      <el-form-item style=\"display=block\" label=\"Photo\">\n        <UploadImage @uploaded=\"handleImageUpload\" @removed=\"handleImageRemoved(file)\"></UploadImage>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit()\">Add Medicine</el-button>\n      </el-form-item>\n    </el-form>\n    <div class=\"FDA_info\">\n      <DetailDescription :detailInfo=\"this.form\" :key=\"this.FDAResult\"></DetailDescription>\n    </div>\n  </div>\n  \n</template>\n\n<script>\nimport store from '../store/index'\nimport api from '../api/index'\nimport DetailDescription from './DetailDescription.vue'\nimport { ref } from 'vue'\nimport UploadImage from './UploadImage.vue'\n\nexport default {\n  name: \"AddMedicine\",\n  data() {\n      return {\n          isPhone: false,\n          formWidth: \"13%\",\n          locations: [],\n          form: {\n              id: -1,\n              brandname: \"\",\n              image: \"\",\n              quantity: \"\",\n              validity: \"\",\n              dosage: \"\",\n              dosagetype: \"\",\n              quantitytype: \"\",\n              manufacturername: \"\",\n              genericname: \"\",\n              producttype: \"\",\n              route: \"\",\n              description: \"\",\n              usage: \"\",\n              warnings: \"\",\n              contraindications: \"\",\n              adversereaction: \"\",\n              overdosage: \"\",\n              username: \"\",\n              locationid: \"\"\n          },\n          mediNote: \"\",\n          FDAResult: null,\n          dosageFreq : \"\",\n      };\n  },\n  props: {},\n  methods: {\n      onSubmit() {\n        var validFlag = this.isFormValid(this.form)\n        if(validFlag.type === \"error\"){\n          ElNotification.error(validFlag.msg)\n          return null\n        } else if(validFlag.type === \"warning\"){\n          ElNotification({\n                      message: validFlag.msg,\n                      type: 'warning',\n          })\n        }\n\n        this.form.dosagetype = this.form.dosagetype + this.dosageFreq\n        this.form.validity = this.form.validity.toLocaleDateString('en-GB')\n        console.log(\"Medicine Information\")\n        console.log(this.form);\n        var that = this\n        api.addMedicine(this.form).then(res => {\n          console.log(res)\n          if(res.data.status === 200){\n            if(that.mediNote !== \"\"){\n              that.addNote(res.data.data)\n            }\n\n            ElNotification({\n                      message: 'SUCCESS',\n                      type: 'success',\n            })\n            that.triggerUpdate()\n          }\n        })\n      },\n\n      addNote(id){\n        console.log(\"id : \" + id)\n        console.log(this.mediNote)\n        api.addMediNote(id, this.mediNote)\n      },\n\n      triggerUpdate(){\n        this.$emit(\"medicine-updated\")\n        this.backtoDashboard()\n      },\n\n      backtoDashboard(){\n        console.log(\"back to dashboard triggered\")\n        var mode = {\n          view : 'default',\n        }\n        this.$emit(\"switch-event\", mode)\n\t\t  },\n\n      isFormValid(form){\n        var results = {\n          state : true,\n          msg : \"Valid form\",\n          type : \"success\"\n        }\n        if(form.brandname.length <= 0){\n          results.state = false,\n          results.msg = \"Brand name missing\"\n          results.type = \"error\"\n          return results\n        }\n        if(form.validity === \"\"){\n          results.state = false,\n          results.msg = \"Expiration date missing\"\n          results.type = \"error\"\n          return results\n        }\n        if(form.quantity === \"\"){\n          results.state = false,\n          results.msg = \"Quantity missing\"\n          results.type = \"error\"\n          return results\n        }\n        if(form.quantitytype === \"\"){\n          results.state = false,\n          results.msg = \"Quantity Unit missing\"\n          results.type = \"error\"\n          return results\n        }\n        if(form.dosage === \"\"){\n          results.state = false,\n          results.msg = \"Dosage missing\"\n          results.type = \"error\"\n          return results\n        }\n        if(form.dosagetype === \"\"){\n          results.state = false,\n          results.msg = \"Dosage Unit missing\"\n          results.type = \"error\"\n          return results\n        }\n        if(this.dosageFreq === \"\"){\n          results.state = false,\n          results.msg = \"Dosage frequency missing\"\n          results.type = \"error\"\n          return results\n        }          \n        if(form.locations === \"\"){\n          results.state = false,\n          results.msg = \"Location missing\"\n          results.type = \"warning\"\n          return results\n        }\n        if(form.image === \"\"){\n          results.state = false,\n          results.msg = \"Image missing\"\n          results.type = \"warning\"\n          return results\n        }\n        return results\n      },\n\n      getFDAInfo(brandname) {\n          console.log(\"User entered \" + brandname);\n          var name = brandname.toUpperCase();\n          var that = this\n          if (name !== \"\") {\n              api.getFDAData(name).then((res) => {\n                  console.log(res.data);\n\n\n                  try{\n                    that.FDAResult = res.data.results[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  // that.FDAResult = res.data.results[0]\n\n\n                  try{\n                    that.form.manufacturername = that.FDAResult.openfda.manufacturer_name[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.manufacturername = that.FDAResult.openfda.manufacturer_name[0]\n\n\n                  try{\n                    that.form.genericname = that.FDAResult.openfda.generic_name[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.genericname = that.FDAResult.openfda.generic_name[0]\n\n\n                  try{\n                    that.form.producttype = that.FDAResult.openfda.product_type[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.producttype = that.FDAResult.openfda.product_type[0]\n\n\n                  try{\n                    that.form.route = that.FDAResult.openfda.route[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.route = that.FDAResult.openfda.route[0]\n\n\n                  try{\n                    that.form.description = that.FDAResult.description[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.description = that.FDAResult.description[0]\n\n\n                  try{\n                    that.form.usage = that.FDAResult.indications_and_usage[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.usage = that.FDAResult.indications_and_usage[0]\n\n\n                  try{\n                    that.form.warnings = that.FDAResult.warnings_and_cautions[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.warnings = that.FDAResult.warnings_and_cautions[0]\n\n\n                  try{\n                    that.form.contraindications = that.FDAResult.contraindications[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.contraindications = that.FDAResult.contraindications[0]\n\n\n                  try{\n                    that.form.adversereaction = that.FDAResult.adverse_reactions[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.adversereaction = that.FDAResult.adverse_reactions[0]\n\n\n                  try{\n                    that.form.overdosage = that.FDAResult.overdosage[0]\n                  } catch (e){\n                    console.error(e)\n                  }\n                  //that.form.overdosage = that.FDAResult.overdosage[0]\n                  ElNotification({\n                            message: \"Extra information is ready\",\n                            type: 'success',\n                          })\n              },\n              ()=>{\n                console.log(\"Medicine Name Not Found\")\n                ElNotification({\n                            message: \"No extra information found\",\n                            type: 'warning',\n                          })\n              });\n          }\n          else {\n              console.log(\"No input\");\n          }\n      },\n      handleImageUpload(url){\n        console.log(\"Image URL is \" + url)\n        this.form.image = url\n      },\n      handleImageRemoved(file){\n        console.log(\"Image deleted\")\n        this.form.image = \"\"\n      }\n  },\n  created() {\n      this.isPhone = !(window.innerWidth > 992);\n      this.locations = store.getters.getLocations;\n      if (this.isPhone) {\n          this.formWidth = \"22%\";\n      }\n      this.form.username = store.getters.getUserName\n  },\n  components: { DetailDescription, UploadImage }\n}\n\n</script>\n\n<style scoped>\n  *{\n    font-family: Tahoma, sans-serif;\n  }\n  .add_medi_form{\n    width : 100%;\n  }\n\n  .add_medi_form :deep(.el-form-item__content) {\n    flex-wrap: inherit;\n  }\n\n\n\n\n  @media screen and (max-width: 992px){\n    .add_medi_form :deep(.el-form-item__label) {\n      font-weight: 900;\n      color: #6E78F7;\n    }\n    .quant_dosage_item{\n      width: 40%;\n      margin-right: 1em;\n    }\n\n    .note_text_area :deep(.el-textarea__inner){\n      border-radius: 1em;\n      box-shadow: 2px 2px 2px #b8cbdd;\n      height: 5em;\n    }\n\n    .FDA_info{\n      margin-top: 2em;\n    }\n    \n    .doage_item :deep(.el-form-item__content){\n      display: block;\n    }\n  }\n\n\n\n\n  @media screen and (min-width: 992px){\n    .add_medi_form{\n      width: 45%;\n      padding: 2em;\n      border-radius: 2em;\n      margin-right: 2em;\n      box-shadow: 5px 5px 5px 5px #b8cbdd;\n      height: 50%;\n    }\n\n    .FDA_info{\n      width: 45%;\n      border-radius: 2em;\n      margin-right: 2em;\n      box-shadow: 5px 5px 5px 5px #b8cbdd;\n      padding-top: 2em;\n      padding-left: 1em;\n      padding-right: 1em;\n      padding-bottom: 2em;\n      height: 100%;\n    }\n    \n    .add_medi{\n      display: flex;\n    }\n\n    .add_medi_form :deep(.el-form-item__label) {\n      font-size: 0.9em;\n      font-weight: 900;\n      color: #6E78F7;\n    }\n    .quant_dosage_item{\n      width: 20%;\n    }\n    .note_text_area :deep(.el-textarea__inner){\n      border-radius: 1em;\n      box-shadow: 2px 2px 2px #b8cbdd;\n      height: 5em;\n    }\n  }\n  \n</style>"]},"metadata":{},"sourceType":"module"}